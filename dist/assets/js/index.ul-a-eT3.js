(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function n(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(e){if(e.ep)return;e.ep=!0;const i=n(e);fetch(e.href,i)}})();function l(){const o=document.getElementById("waitlistModalNew");if(!o)return;const s=document.getElementById("waitlistModalForm"),n=document.getElementById("modalSuccessMessage"),t=document.getElementById("modalErrorMessage");s&&s.reset(),n&&n.classList.add("hidden"),t&&(t.classList.add("hidden"),t.textContent=""),m(),o.classList.remove("hidden"),o.classList.add("flex"),document.body.classList.add("overflow-hidden")}function c(){const o=document.getElementById("waitlistModalNew");o&&(o.classList.add("hidden"),o.classList.remove("flex"),document.body.classList.remove("overflow-hidden"))}function m(){try{const o=new URLSearchParams(window.location.search);["utm_source","utm_medium","utm_campaign","utm_term","utm_content","gclid","fbclid"].forEach(t=>{const e=o.get(t);if(e){const i=document.getElementById(t);i&&(i.value=e)}});const n=o.get("ref");if(n){const t=document.getElementById("referral_code");t&&(t.value=n)}}catch(o){console.error("Error capturing UTM params:",o)}}async function u(o){o.preventDefault();const s=o.target,n=s.querySelector('button[type="submit"]'),t=document.getElementById("modalErrorMessage");n&&(n.disabled=!0,n.innerHTML,n.innerHTML=`
      <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-spaceBlack inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>
      Submitting...
    `);const e=new FormData(s),i={email:e.get("email"),fullName:e.get("fullName")||"",marketingOK:e.get("marketingOK")==="on",utm_source:e.get("utm_source"),utm_medium:e.get("utm_medium"),utm_campaign:e.get("utm_campaign"),utm_term:e.get("utm_term"),utm_content:e.get("utm_content"),gclid:e.get("gclid"),fbclid:e.get("fbclid"),referral_code:e.get("referral_code")};try{const r=await fetch("/.netlify/functions/waitlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),d=await r.json();if(r.ok){s.classList.add("hidden");const a=document.getElementById("modalSuccessMessage");a&&a.classList.remove("hidden"),localStorage.getItem("rr_cookie_consent")==="accepted"&&typeof gtag=="function"&&gtag("event","waitlist_submit",{event_category:"waitlist",event_label:i.email,value:1}),typeof fbq=="function"&&fbq("track","Lead"),setTimeout(c,3e3)}else t&&(t.textContent=d.message||"An error occurred. Please try again.",t.classList.remove("hidden"))}catch(r){console.error("Waitlist submission error:",r),t&&(t.textContent="Network error. Please check your connection and try again.",t.classList.remove("hidden"))}finally{n&&(n.disabled=!1,n.innerHTML="Join the Waitlist")}}document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("waitlistModalForm");o&&o.addEventListener("submit",u);const s=document.getElementById("closeWaitlistModal");s&&s.addEventListener("click",c);const n=document.getElementById("closeSuccessModal");n&&n.addEventListener("click",c);const t=document.getElementById("waitlistModalNew");t&&t.addEventListener("click",e=>{e.target===t&&c()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&c()})});document.addEventListener("DOMContentLoaded",()=>{["joinWaitlistBtn","joinWaitlistBtnDrawer"].forEach(o=>{const s=document.getElementById(o);s&&s.addEventListener("click",l)})});
